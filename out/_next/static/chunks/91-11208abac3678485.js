(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{5833:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(7437),i=n(2265),s=n(6176);function l(e){let{publication_key:t,isHidden:n,setHidden:i}=e;return(0,r.jsxs)("div",{className:n+" flex flex-col fixed top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 h-2/3 md:h-1/2 w-4/6 bg-slate-100 z-10 shadow-2xl rounded-lg",children:[(0,r.jsx)("div",{className:"bg-stone-200 p-1 rounded-t-lg",children:(0,r.jsx)("div",{className:"text-[0.7rem] leading-[0.9rem] rounded-full bg-red-500 hover:bg-red-800 w-4 h-4 text-center ml-auto",onClick:()=>{i("hidden")},children:"X"})}),(0,r.jsxs)("div",{className:"text-center m-auto pl-4 pr-4 text-xl md:text-[1.4rem] md:leading-8",children:["You're a right good pub-goer.",(0,r.jsx)("br",{}),"Well on ya, mate!",(0,r.jsx)("br",{})]}),(0,r.jsxs)("div",{className:"grid grid-rows-2 md:grid-cols-2 mt-auto items-center p-6 text-lg sm:text-xl  md:text-[1.25rem] text-center",children:[(0,r.jsx)("a",{className:" bg-pubyellow border-pubblue hover:bg-amber-200 border-2 rounded-full mb-4 md:mb-0 md:mr-4 mr-0",href:"/",children:"Continue Shopping"}),(0,r.jsx)("a",{className:" bg-pubblue border-pubyellow hover:bg-sky-200 border-2 rounded-full md:ml-4 ml-0",href:"/cart",children:"Go To Cart"})]})]})}function a(e){let{publication_key:t}=e,[n,a]=(0,i.useContext)(s.A),[o,c]=(0,i.useState)("hidden");return(0,r.jsxs)("div",{children:[(0,r.jsx)(l,{isHidden:o,setHidden:c,publication_key:t}),(0,r.jsx)("div",{href:"/cart",className:"h-6 w-auto p-4 bg-[#93c47d] text-stone-800 hover:bg-amber-50 border-[#f1c232] border-2 rounded-full text-center align-middle leading-[0rem] text-[0.75rem]  sm:text-[1rem]  md:text-[1.25rem] whitespace-nowrap ",onClick:()=>{!function(){let e={...n};e[t]?e[t].quantity+=1:e[t]={quantity:1},console.log(e),a(t=>({...e}))}(),c("visible")},children:"Add To Cart"})]})}},6176:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(2265);let i=(0,r.createContext)([])},3543:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(7437),i=n(6691),s=n.n(i),l=n(2265);let a={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},o={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},c="mousemove",u="mouseup";function d(e,t){if(0===t)return e;let n=Math.PI/180*t,r=e[0]*Math.cos(n)+e[1]*Math.sin(n),i=e[1]*Math.cos(n)-e[0]*Math.sin(n);return[r,i]}function p(e){let{publication:t,image_paths:n}=e,[i,p]=(0,l.useState)(!1),[h,f]=(0,l.useState)(t.coverImage);n.filter(e=>e!=h);let m=e=>{if("Left"==e){let e=(n.indexOf(h)+1)%n.length;f(n[e])}else if("Right"==e){let e=((n.indexOf(h)-1)%n.length+n.length)%n.length;f(n[e])}},g=function(e){var t,n,r;let i;let{trackMouse:s}=e,p=l.useRef(Object.assign({},o)),h=l.useRef(Object.assign({},a)),f=l.useRef(Object.assign({},h.current));for(i in f.current=Object.assign({},h.current),h.current=Object.assign(Object.assign({},a),e),a)void 0===h.current[i]&&(h.current[i]=a[i]);let[m,g]=l.useMemo(()=>(function(e,t){let n=t=>{let n="touches"in t;n&&t.touches.length>1||e((e,i)=>{i.trackMouse&&!n&&(document.addEventListener(c,r),document.addEventListener(u,l));let{clientX:s,clientY:a}=n?t.touches[0]:t,p=d([s,a],i.rotationAngle);return i.onTouchStartOrOnMouseDown&&i.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),o),{initial:p.slice(),xy:p,start:t.timeStamp||0})})},r=t=>{e((e,n)=>{let r="touches"in t;if(r&&t.touches.length>1)return e;if(t.timeStamp-e.start>n.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;let{clientX:i,clientY:s}=r?t.touches[0]:t,[l,o]=d([i,s],n.rotationAngle),c=l-e.xy[0],u=o-e.xy[1],p=Math.abs(c),h=Math.abs(u),f=(t.timeStamp||0)-e.start,m=Math.sqrt(p*p+h*h)/(f||1),g=[c/(f||1),u/(f||1)],b=p>h?c>0?"Right":"Left":u>0?"Down":"Up",x="number"==typeof n.delta?n.delta:n.delta[b.toLowerCase()]||a.delta;if(p<x&&h<x&&!e.swiping)return e;let v={absX:p,absY:h,deltaX:c,deltaY:u,dir:b,event:t,first:e.first,initial:e.initial,velocity:m,vxvy:g};v.first&&n.onSwipeStart&&n.onSwipeStart(v),n.onSwiping&&n.onSwiping(v);let w=!1;return(n.onSwiping||n.onSwiped||n[`onSwiped${b}`])&&(w=!0),w&&n.preventScrollOnSwipe&&n.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:v,swiping:!0})})},i=t=>{e((e,n)=>{let r;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<n.swipeDuration){r=Object.assign(Object.assign({},e.eventData),{event:t}),n.onSwiped&&n.onSwiped(r);let i=n[`onSwiped${r.dir}`];i&&i(r)}}else n.onTap&&n.onTap({event:t});return n.onTouchEndOrOnMouseUp&&n.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),o),{eventData:r})})},s=()=>{document.removeEventListener(c,r),document.removeEventListener(u,l)},l=e=>{s(),i(e)},p=(e,t)=>{let s=()=>{};if(e&&e.addEventListener){let l=Object.assign(Object.assign({},a.touchEventOptions),t.touchEventOptions),o=[["touchstart",n,l],["touchmove",r,Object.assign(Object.assign({},l),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",i,l]];o.forEach(([t,n,r])=>e.addEventListener(t,n,r)),s=()=>o.forEach(([t,n])=>e.removeEventListener(t,n))}return s},h={ref:t=>{null!==t&&e((e,n)=>{if(e.el===t)return e;let r={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),r.cleanUpTouch=void 0),n.trackTouch&&t&&(r.cleanUpTouch=p(t,n)),Object.assign(Object.assign(Object.assign({},e),{el:t}),r)})}};return t.trackMouse&&(h.onMouseDown=n),[h,p]})(e=>p.current=e(p.current,h.current),{trackMouse:s}),[s]);return p.current=(t=p.current,n=h.current,r=f.current,n.trackTouch&&t.el?t.cleanUpTouch?n.preventScrollOnSwipe!==r.preventScrollOnSwipe||n.touchEventOptions.passive!==r.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:g(t.el,n)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:g(t.el,n)}):(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0}))),m}({onSwiped:e=>m(e.dir),swipeDuration:500,preventScrollOnSwipe:!0,trackMouse:!0}),b=e=>{if("bg"==e.target.id)p(!1);else if("forward"==e.target.id){let e=(n.indexOf(h)+1)%n.length;f(n[e])}else if("back"==e.target.id){let e=((n.indexOf(h)-1)%n.length+n.length)%n.length;f(n[e])}};return(0,r.jsxs)("div",{className:"pb-6 sm:pl-4 sm:pr-4 flex flex-col items-center",children:[(0,r.jsx)("div",{className:"flex flex-col h-[70vw] md:h-[50vw] xl:h-[40vw] w-[100%] xl:w-[85%] bg-black relative mb-2 justify-center",children:(0,r.jsx)(s(),{...g,className:i?"fixed z-20 top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2":" ",priority:!0,src:h,alt:"".concat(t.title," cover"),quality:90,fill:!0,style:{objectFit:"cover"},onClick:()=>{p(!0)}})}),(0,r.jsx)("div",{className:"flex flex-row overflow-scroll md:h-[5rem] h-[3rem]",children:n.map(e=>(0,r.jsx)(s(),{className:e===h?"pr-2 opacity-100":"pr-2 opacity-50",onClick:()=>f(e),src:e,alt:"$(publication.title) cover image",width:100,height:100,quality:25,sizes:"100vw",style:{width:"auto",height:"100%"}},e))}),i&&(0,r.jsxs)("div",{id:"bg",className:"bg-black fixed top-0 left-0 h-screen w-screen z-10",onClick:e=>b(e),children:[(0,r.jsx)("div",{className:"mr-2 mt-2 right-10 text-[0.7rem] leading-[1rem] rounded-full bg-gray-200 opacity-70 hover:bg-red-800 w-4 h-4 text-center ml-auto",onClick:()=>{p(!1)},children:"X"}),(0,r.jsx)("div",{id:"back",className:"fixed z-30 left-0  opacity-60 h-full text-white text-[5rem] p-4",onClick:e=>b(e),children:(0,r.jsx)("div",{id:"back",className:" relative top-1/2 -translate-y-1/2",children:"<"})}),(0,r.jsx)("div",{id:"forward",className:"fixed z-30 right-0 opacity-60 h-full text-white text-[5rem] p-4 shadow-2xl shadow-rose-700",onClick:e=>b(e),children:(0,r.jsx)("div",{id:"forward",className:"relative top-1/2 -translate-y-1/2",children:">"})})]})]})}},8724:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(7437),i=n(5833),s=n(2265);let l=async e=>{let t=await fetch("https://p3p22yr8sg.execute-api.eu-west-2.amazonaws.com/default/checkInventory?"+new URLSearchParams({productId:e}));if(t.ok){let e=await t.json();return console.log(e),e}};function a(e){let{publication:t,publication_key:n}=e,[a,o]=(0,s.useState)({soldOut:!1,itemsLeft:0});return(0,s.useEffect)(()=>{console.log("updating inv."),l(n).then(e=>{let n=!(e.lockedInventory<=t.stockQuantity),r=e.lockedInventory;o({soldOut:n,itemsLeft:r})})},[]),(0,r.jsxs)("div",{className:"grid grid-cols-1 m-2 sm:m-6 uppercase font-medium leading-5",children:[(0,r.jsx)("b",{children:t.title}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{className:"",children:"Published in "+t.publicationYear}),(0,r.jsx)("li",{className:"",children:t.detail})]}),(0,r.jsx)("p",{className:"mt-2 mb-4 w-inherit ",children:t.info}),(0,r.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col text-sm md:",children:[!a.soldOut&&(0,r.jsx)("div",{children:"(".concat(a.itemsLeft,"/").concat(t.stockQuantity,")")}),a.soldOut&&(0,r.jsx)("a",{className:" underline hover:text-pubblue",href:"mailto:support@yourlocalpublication.com?subject=Print more copies of ".concat(t.title,"&body=I want to buy one \uD83D\uDE00"),children:"Print more!"}),(0,r.jsx)("div",{className:"font-bold",children:"\xa3"+t.price})]}),a.soldOut&&(0,r.jsx)("div",{className:"h-6 w-auto p-4  text-stone-800 border-pubred border-2 rounded-full text-center align-middle md:text-[1.25] leading-[0rem] text-[.75rem] whitespace-nowrap",children:" Sold out!"}),!a.soldOut&&(0,r.jsx)(i.default,{publication_key:n})]})]})}},1295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return c},unstable_getImgProps:function(){return o}});let r=n(1024),i=n(2301),s=n(7873),l=n(3222),a=r._(n(5033)),o=e=>{(0,s.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,i.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}},c=l.Image},622:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),i=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!a.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:l.current}}t.jsx=o,t.jsxs=o},7437:function(e,t,n){"use strict";e.exports=n(622)},6691:function(e,t,n){e.exports=n(1295)}}]);