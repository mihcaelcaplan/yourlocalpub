(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{5833:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var n=r(7437),s=r(2265),o=r(6176),i=r(7158);function c(e){let{publication_key:t,isHidden:r,setHidden:s}=e;return(0,n.jsx)("div",{className:r+" flex flex-col fixed top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 h-2/3 md:h-1/2 w-4/6 bg-slate-100 z-10 shadow-2xl border-black border-2",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"absolute top-0 bg-stone-200 z-10 w-full ml-auto border-b-black border-b-2",children:(0,n.jsx)("div",{className:"text-[1rem] leading-[1.rem] bg-red-500 hover:bg-red-800 w-6 h-6 text-center ml-auto border-l-black border-l-2",onClick:()=>{s("hidden")},children:"X"})}),(0,n.jsx)("div",{className:"absolute w-full h-full",children:(0,n.jsx)(l,{})}),(0,n.jsx)("div",{className:"absolute top-1/3 -translate-y-1/2 left-1/2 -translate-x-1/2",children:(0,n.jsxs)("div",{className:"text-center m-auto pl-4 pr-4 text-xl md:text-[1.4rem] md:leading-8 bg-white border-2 border-black w-auto",children:["You're a right good pub-goer.",(0,n.jsx)("br",{}),"Well on ya, mate!",(0,n.jsx)("br",{})]})})]})})}let l=()=>{let e="h-1/6";return(0,n.jsxs)("div",{className:"h-full",children:[(0,n.jsxs)("div",{className:"grid grid-rows-1 grid-cols-brick1 ".concat(e),children:[(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0})]}),(0,n.jsxs)("div",{className:"grid grid-rows-1 grid-cols-brick2 ".concat(e),children:[(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0})]}),(0,n.jsxs)("div",{className:"grid grid-rows-1 grid-cols-brick3 ".concat(e),children:[(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0})]}),(0,n.jsxs)("div",{className:"grid grid-rows-1 grid-cols-brick4 ".concat(e),children:[(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)("a",{href:"/",className:"flex bg-green-600 text-white justify-center border border-black",children:(0,n.jsx)("span",{className:"text-[1.2vh] md:text-[1.5vw] self-center font-semibold",children:"Keep Shopping"})}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)("a",{href:"/cart",className:"flex bg-yellow-400 text-white justify-center border border-black",children:(0,n.jsx)("span",{className:"text-[1.2vh] md:text-[1.5vw] self-center font-semibold",children:"Go to Cart"})}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0})]}),(0,n.jsxs)("div",{className:"grid grid-rows-1 grid-cols-brick5 ".concat(e),children:[(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0})]}),(0,n.jsxs)("div",{className:"grid grid-rows-1 grid-cols-brick2 ".concat(e),children:[(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0}),(0,n.jsx)(i.Q,{borderTB:!0,borderRL:!0})]})]})};function a(e){let{publication_key:t}=e,[r,i]=(0,s.useContext)(o.A),[l,a]=(0,s.useState)("hidden");return(0,n.jsxs)("div",{children:[(0,n.jsx)(c,{isHidden:l,setHidden:a,publication_key:t}),(0,n.jsx)("div",{href:"/cart",className:"h-6 w-auto p-4 bg-indigo-700 font-semibold text-white hover:bg-indigo-400 border-black border-2 text-center align-middle leading-[0rem] text-[0.75rem]  sm:text-[1rem]  md:text-[1.25rem] whitespace-nowrap ",onClick:()=>{!function(){let e={...r};e[t]?e[t].quantity+=1:e[t]={quantity:1},console.log(e),i(t=>({...e}))}(),a("visible")},children:"Buy"})]})}},7158:function(e,t,r){"use strict";r.d(t,{L:function(){return o},Q:function(){return s}});var n=r(7437);let s=e=>{let{position:t,borderTB:r,borderRL:s,span:o}=e,i=o>1?"col-span-".concat(o):"";return(0,n.jsx)("div",{className:"bg-orange-800 ".concat(r?"border-t-black border-t border-b-black border-b":""," ").concat(s?"border-l-black border-l border-r-black border-r":""," ").concat(i)})},o=e=>{let{position:t,borderTB:r,borderRL:s,span:o}=e,i=o>1?"col-span-".concat(o):"";return(0,n.jsx)("div",{className:" ".concat(r?"border-t-black border-t border-b-black border-b":""," ").concat(s?"border-l-black border-l border-r-black border-r":""," ").concat(i)})}},6176:function(e,t,r){"use strict";r.d(t,{A:function(){return s}});var n=r(2265);let s=(0,n.createContext)([])},3543:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(7437),s=r(6691),o=r.n(s),i=r(2265);let c={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},l={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},a="mousemove",d="mouseup";function u(e,t){if(0===t)return e;let r=Math.PI/180*t,n=e[0]*Math.cos(r)+e[1]*Math.sin(r),s=e[1]*Math.cos(r)-e[0]*Math.sin(r);return[n,s]}function b(e){let{publication:t,image_paths:r}=e,[s,b]=(0,i.useState)(!1),[h,f]=(0,i.useState)(t.coverImage);r.filter(e=>e!=h);let x=e=>{if("Left"==e){let e=(r.indexOf(h)+1)%r.length;f(r[e])}else if("Right"==e){let e=((r.indexOf(h)-1)%r.length+r.length)%r.length;f(r[e])}},m=e=>{let t;switch(e.key){case"Escape":b(!1);break;case"ArrowRight":t=(r.indexOf(h)+1)%r.length,f(r[t]);break;case"ArrowLeft":t=((r.indexOf(h)-1)%r.length+r.length)%r.length,f(r[t])}};(0,i.useEffect)(()=>(document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}),[h]);let p=function(e){var t,r,n;let s;let{trackMouse:o}=e,b=i.useRef(Object.assign({},l)),h=i.useRef(Object.assign({},c)),f=i.useRef(Object.assign({},h.current));for(s in f.current=Object.assign({},h.current),h.current=Object.assign(Object.assign({},c),e),c)void 0===h.current[s]&&(h.current[s]=c[s]);let[x,m]=i.useMemo(()=>(function(e,t){let r=t=>{let r="touches"in t;r&&t.touches.length>1||e((e,s)=>{s.trackMouse&&!r&&(document.addEventListener(a,n),document.addEventListener(d,i));let{clientX:o,clientY:c}=r?t.touches[0]:t,b=u([o,c],s.rotationAngle);return s.onTouchStartOrOnMouseDown&&s.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),l),{initial:b.slice(),xy:b,start:t.timeStamp||0})})},n=t=>{e((e,r)=>{let n="touches"in t;if(n&&t.touches.length>1)return e;if(t.timeStamp-e.start>r.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;let{clientX:s,clientY:o}=n?t.touches[0]:t,[i,l]=u([s,o],r.rotationAngle),a=i-e.xy[0],d=l-e.xy[1],b=Math.abs(a),h=Math.abs(d),f=(t.timeStamp||0)-e.start,x=Math.sqrt(b*b+h*h)/(f||1),m=[a/(f||1),d/(f||1)],p=b>h?a>0?"Right":"Left":d>0?"Down":"Up",g="number"==typeof r.delta?r.delta:r.delta[p.toLowerCase()]||c.delta;if(b<g&&h<g&&!e.swiping)return e;let j={absX:b,absY:h,deltaX:a,deltaY:d,dir:p,event:t,first:e.first,initial:e.initial,velocity:x,vxvy:m};j.first&&r.onSwipeStart&&r.onSwipeStart(j),r.onSwiping&&r.onSwiping(j);let v=!1;return(r.onSwiping||r.onSwiped||r[`onSwiped${p}`])&&(v=!0),v&&r.preventScrollOnSwipe&&r.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:j,swiping:!0})})},s=t=>{e((e,r)=>{let n;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<r.swipeDuration){n=Object.assign(Object.assign({},e.eventData),{event:t}),r.onSwiped&&r.onSwiped(n);let s=r[`onSwiped${n.dir}`];s&&s(n)}}else r.onTap&&r.onTap({event:t});return r.onTouchEndOrOnMouseUp&&r.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),l),{eventData:n})})},o=()=>{document.removeEventListener(a,n),document.removeEventListener(d,i)},i=e=>{o(),s(e)},b=(e,t)=>{let o=()=>{};if(e&&e.addEventListener){let i=Object.assign(Object.assign({},c.touchEventOptions),t.touchEventOptions),l=[["touchstart",r,i],["touchmove",n,Object.assign(Object.assign({},i),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",s,i]];l.forEach(([t,r,n])=>e.addEventListener(t,r,n)),o=()=>l.forEach(([t,r])=>e.removeEventListener(t,r))}return o},h={ref:t=>{null!==t&&e((e,r)=>{if(e.el===t)return e;let n={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),n.cleanUpTouch=void 0),r.trackTouch&&t&&(n.cleanUpTouch=b(t,r)),Object.assign(Object.assign(Object.assign({},e),{el:t}),n)})}};return t.trackMouse&&(h.onMouseDown=r),[h,b]})(e=>b.current=e(b.current,h.current),{trackMouse:o}),[o]);return b.current=(t=b.current,r=h.current,n=f.current,r.trackTouch&&t.el?t.cleanUpTouch?r.preventScrollOnSwipe!==n.preventScrollOnSwipe||r.touchEventOptions.passive!==n.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:m(t.el,r)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:m(t.el,r)}):(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0}))),x}({onSwiped:e=>x(e.dir),swipeDuration:500,preventScrollOnSwipe:!0,trackMouse:!0}),g=e=>{if("bg"==e.target.id)b(!1);else if("forward"==e.target.id){let e=(r.indexOf(h)+1)%r.length;f(r[e])}else if("back"==e.target.id){let e=((r.indexOf(h)-1)%r.length+r.length)%r.length;f(r[e])}};return(0,n.jsxs)("div",{className:"pb-6 sm:pl-4 sm:pr-4 xl:pr-24 xl:pl-24 flex flex-col items-center ",children:[(0,n.jsx)("div",{className:s?"absolute z-20 top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 w-[100%] md:w-[90vw] h-[80vw] md:h-[100%] bg-black mb-2 justify-center":"flex flex-col h-[70vw] md:h-[40vw] xl:h-[32vw] w-[100%] bg-black relative mb-2 justify-center",children:(0,n.jsx)(o(),{...p,className:s?"z-20":"",priority:!0,src:h,alt:"".concat(t.title," cover"),quality:90,fill:!0,style:{objectFit:"cover"},onClick:()=>{b(!0)}})}),(0,n.jsx)("div",{className:"flex flex-row overflow-scroll md:h-[5rem] h-[3rem] w-full justify-start",children:r.map(e=>(0,n.jsx)(o(),{className:e===h?"pr-2 opacity-100":"pr-2 opacity-50",onClick:()=>f(e),src:e,alt:"$(publication.title) cover image",width:100,height:100,quality:25,sizes:"100vw",style:{width:"auto",height:"100%"}},e))}),s&&(0,n.jsxs)("div",{id:"bg",className:"bg-black fixed top-0 left-0 h-screen w-screen z-10",onClick:e=>g(e),children:[(0,n.jsx)("div",{className:"mr-2 mt-2 right-10 text-[0.7rem] leading-[1rem] rounded-full bg-gray-200 opacity-70 hover:bg-red-800 w-4 h-4 text-center ml-auto",onClick:()=>{b(!1)},children:"X"}),(0,n.jsx)("div",{id:"back",className:"fixed z-30 left-0  opacity-60 h-full text-white text-[5rem] p-4",onClick:e=>g(e),children:(0,n.jsx)("div",{id:"back",className:" relative top-1/2 -translate-y-1/2",children:"<"})}),(0,n.jsx)("div",{id:"forward",className:"fixed z-30 right-0 opacity-60 h-full text-white text-[5rem] p-4 ",onClick:e=>g(e),children:(0,n.jsx)("div",{id:"forward",className:"relative top-1/2 -translate-y-1/2",children:">"})})]})]})}},7115:function(e,t,r){"use strict";r.r(t),r.d(t,{getInventory:function(){return n}});let n=async e=>{let t=await fetch("https://p3p22yr8sg.execute-api.eu-west-2.amazonaws.com/default/checkInventory?"+new URLSearchParams({productId:e}));if(t.ok){let r=await t.json();return console.log("inventory for ".concat(e,":"),r),r}}},8724:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(7437),s=r(5833),o=r(2265),i=r(7115);function c(e){let{publication:t,publication_key:r}=e,[c,l]=(0,o.useState)({soldOut:!1,lockedInventory:0});return(0,o.useEffect)(()=>{console.log("updating inv."),(0,i.getInventory)(r).then(e=>{let r=!(e.lockedInventory<t.stockQuantity),n=e.lockedInventory;l({soldOut:r,lockedInventory:n})})},[]),(0,n.jsxs)("div",{className:"grid grid-cols-1 mr-2 ml-2 sm:ml-4 sm:mr-4 font-[475] leading-5",children:[(0,n.jsx)("b",{children:t.title}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{className:"",children:"Published in "+t.publicationYear}),(0,n.jsx)("li",{className:"",children:t.detail})]}),(0,n.jsx)("p",{className:"mt-2 mb-4 w-inherit ",children:t.info}),(0,n.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex flex-col text-sm md:",children:[!c.soldOut&&(0,n.jsx)("div",{children:"(".concat(c.lockedInventory,"/").concat(t.stockQuantity,")")}),c.soldOut&&(0,n.jsx)("a",{className:" underline hover:text-pubblue",href:"mailto:support@yourlocalpublication.com?subject=Print more copies of ".concat(t.title,"&body=I want to buy one \uD83D\uDE00"),children:"Print more!"}),(0,n.jsx)("div",{className:"font-bold",children:"\xa3"+t.price})]}),c.soldOut&&(0,n.jsx)("div",{className:"h-6 w-auto p-4  text-stone-800 border-pubred border-2 rounded-full text-center align-middle md:text-[1.25] leading-[0rem] text-[.75rem] whitespace-nowrap",children:" Sold out!"}),!c.soldOut&&(0,n.jsx)(s.default,{publication_key:r})]})]})}},1295:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return a},unstable_getImgProps:function(){return l}});let n=r(1024),s=r(2301),o=r(7873),i=r(3222),c=n._(r(5033)),l=e=>{(0,o.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,s.getImgProps)(e,{defaultLoader:c.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},a=i.Image},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),s=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,l={},a=null,d=null;for(n in void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,n)&&!c.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===l[n]&&(l[n]=t[n]);return{$$typeof:s,type:e,key:a,ref:d,props:l,_owner:i.current}}t.jsx=l,t.jsxs=l},7437:function(e,t,r){"use strict";e.exports=r(622)},6691:function(e,t,r){e.exports=r(1295)}}]);