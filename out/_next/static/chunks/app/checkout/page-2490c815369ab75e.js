(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{8830:function(e,t,r){Promise.resolve().then(r.bind(r,7393))},1434:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(7437),a=r(6691),o=r.n(a),i=r(4723),n=r(2265),l=r(6176),c=r(7115);function d(e){let{cart:t,item_key:r,checkout:a}=e,[d,m]=(0,n.useContext)(l.A),[p,b]=(0,n.useState)(t[r].quantity),g=i.Z[r],[f,x]=(0,n.useState)({soldOut:!1,availableQuantity:0});return!0!=a&&(0,n.useEffect)(()=>{console.log("updating inv."),(0,c.getInventory)(r).then(e=>{let t=!(e.lockedInventory<g.stockQuantity);e.lockedInventory;let r={soldOut:t,availableQuantity:g.stockQuantity-e.lockedInventory};console.log("inventory",r),x(r)})},[]),(0,s.jsxs)("div",{className:"bg-white border-2 border-black drop-shadow-sm grid grid-cols-cartItemNoImg sm:grid-cols-cartItemImg p-2 md:p-2 gap-2 justify-center text-center items-center",children:[(0,s.jsx)("a",{href:i.Z[r].route,className:"m-auto hidden sm:inline",children:(0,s.jsx)(o(),{className:"",src:i.Z[r].coverImage,alt:"$(item.title) cover image",width:100,height:100,sizes:"100vw",style:{width:"100%",height:"auto"}})}),(0,s.jsx)("div",{className:"flex flex-col justify-center border-r-2",children:(0,s.jsx)("p",{className:"pl-2 pr-2",children:i.Z[r].title})}),(0==p||!0==f.soldOut)&&(0,s.jsx)(h,{setQuantity:b,item_key:r}),p>0&&!1==f.soldOut&&(0,s.jsxs)("div",{className:"flex flex-col justify-center border-r-2",children:[a&&(0,s.jsxs)("div",{children:["x",t[r].quantity]}),!a&&(0,s.jsx)(u,{item_key:r,quantity:p,setQuantity:b,availableQuantity:f.availableQuantity})]}),p>0&&!1==f.soldOut&&(0,s.jsx)("div",{className:"flex flex-col justify-center",children:(0,s.jsxs)("p",{children:["\xa3",i.Z[r].price]})})]})}function u(e){let{item_key:t,quantity:r,setQuantity:a,availableQuantity:o}=e,[i,c]=(0,n.useContext)(l.A);return(0,n.useEffect)(()=>{let e={...i};e[t].quantity=r,c(t=>({...e}))},[r]),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center p-2 ",children:[(0,s.jsx)("div",{className:" bg-slate-200 hover:bg-pubblue p-1 w-[1.5rem]",onClick:()=>{a(Number(r)-1)},children:"-"}),(0,s.jsx)("div",{className:"text-center w-6",children:r}),(0,s.jsx)("div",{className:" bg-rose-200 hover:bg-pubred p-1 w-[1.5rem]",onClick:()=>{let e=Number(r)+1;e<=o?a(e):alert("Sorry, only ".concat(r," left!"))},children:"+"})]})}function h(e){let{setQuantity:t,item_key:r}=e,[a,o]=(0,n.useContext)(l.A);return(0,s.jsxs)("div",{className:"flex flex-col col-span-2 border-2 border-black bg-pubbrickblue w-full h-full",children:[(0,s.jsx)("div",{className:"flex flex-row bg-gray-200 border-b-2 border-black",children:(0,s.jsx)("div",{className:"text-[0.7rem] bg-red-500 hover:bg-red-800 w-4 h-4 text-center ml-auto m-2",onClick:()=>{t(1)},children:"X"})}),(0,s.jsx)("div",{className:"flex flex-col text-white justify-center text-center h-1/2 mt-auto mb-auto ml-2 mr-2",onClick:()=>{delete a[r],o(e=>({...a}))},children:(0,s.jsx)("p",{children:"Remove?"})})]})}},259:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(7437),a=r(1434);function o(e){let{price:t}=e;return(0,s.jsxs)("div",{className:"bg-white border-2 border-black grid grid-cols-shippingItem p-2 gap-2 justify-center text-center",children:[(0,s.jsx)("div",{className:"text-[2rem]",children:"\uD83D\uDCE6"}),(0,s.jsx)("div",{className:"flex flex-col justify-center border-r-2 pl-2",children:(0,s.jsx)("p",{children:"Shipping"})}),(0,s.jsx)("div",{className:"flex flex-col justify-center pl-2",children:(0,s.jsxs)("p",{children:["\xa3",t]})})]})}function i(e){let{cart:t,shippingPrice:r}=e;return console.log(t),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[Object.keys(t).map(e=>(0,s.jsx)(a.Z,{cart:t,item_key:e,checkout:!0})),(0,s.jsx)(o,{price:r.current})]})}r(6691)},7393:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(7437),a=r(8475),o=r.n(a),i=r(2265),n=r(6176),l=r(259),c=r(1865);r(4016);var d=r(5794),u=r.n(d);function h(e){let{form:t}=e,[r,a,o]=t;return(0,s.jsx)("div",{className:"bg-white border-2 border-black mt-4 p-4",children:(0,s.jsxs)("form",{children:[(0,s.jsx)("h2",{className:"text-lg   font-semibold",children:"Shipping Address:"}),(0,s.jsxs)("div",{className:"pb-4",children:["*international shipping coming soon! For now, please contact us via ",(0,s.jsx)("a",{className:" text-blue-400 underline",href:"mailto:contact@yourlocalpublication.com",children:"email!"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,s.jsx)("label",{htmlFor:"country",children:"Country*"}),(0,s.jsx)(m,{form:[r,a,o]}),(0,s.jsx)("label",{htmlFor:"shippingName",children:"Name*"}),(0,s.jsx)("input",{id:"shippingName",...r("fullName",{required:!0}),className:"md:col-span-2 p-2 rounded-md border border-gray-400"+(o.fullName?" bg-red-200":"")}),(0,s.jsx)("label",{htmlFor:"address1",children:"Address Line 1*"}),(0,s.jsx)("input",{id:"address1",...r("address1",{required:!0}),className:"md:col-span-2 p-2 rounded-md border border-gray-400"+(o.address1?" bg-red-200":"")}),(0,s.jsx)("label",{htmlFor:"address2",children:"Address Line 2"}),(0,s.jsx)("input",{id:"address2",...r("address2"),className:"md:col-span-2 p-2 rounded-md border border-gray-400"+(o.address2?" bg-red-200":"")}),(0,s.jsx)("label",{htmlFor:"postcode",children:"Post Code*"}),(0,s.jsx)("input",{id:"postcode",...r("postCode",{required:!0}),className:"md:col-span-2 p-2 rounded-md border border-gray-400"+(o.postCode?" bg-red-200":"")})]}),(0,s.jsx)("h2",{className:"text-lg pb-2 pt-4 font-semibold",children:"Contact Info:"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 ",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email Address*"}),(0,s.jsx)("input",{id:"email",...r("email",{required:"Email required"}),className:"md:col-span-2 p-2 rounded-md border border-gray-400"+(o.email?" bg-red-200":"")}),(0,s.jsx)("label",{htmlFor:"phoneNum",children:"Phone Number*"}),(0,s.jsx)(c.Qr,{control:a,name:"phoneNum",rules:{required:"Phone num required."},render:e=>{let{field:{onChange:t,onBlur:r,value:a,ref:i}}=e;return(0,s.jsx)(u(),{id:"phoneNum",country:"gb",onChange:t,enableSearch:!0,inputStyle:{background:o.phoneNum?"rgb(254 202 202":"",fontSize:"1rem",lineHeight:"1.5rem",width:"100%"},inputProps:{name:"phoneNum",required:!0,autoFocus:!0}})}})]})]})})}r(1457);let m=e=>{let{form:t}=e,[r,a]=t;return(0,s.jsx)("select",{id:"country",defaultValue:"United Kingdom",...r("country",{required:!0,validate:e=>"United Kingdom"===e||"NUh uh"}),className:"md:col-span-2 p-2 rounded-md border border-gray-400"+(a.country?" border-red-500 border-2":""),children:(0,s.jsx)("option",{value:"United Kingdom",children:"United Kingdom"})})};function p(){let[e,t]=(0,i.useContext)(n.A),{register:r,handleSubmit:a,watch:d,formState:{errors:u},control:m}=(0,c.cI)({mode:"onTouched"});d(u);var p=(0,i.useRef)(),b=(0,i.useRef)(),g=(0,i.useRef)(),f=(0,i.useRef)(),x=(0,i.useRef)(),y=(0,i.useRef)();(0,i.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("checkout"));b.current=e.checkoutId,x.current=e.shippingPrice,y.current=e.checkoutPrice},[]),(0,i.useEffect)(()=>{Object.keys(e).length>0&&localStorage.setItem("checkoutCart",JSON.stringify(e))},[e]);let v=()=>{p.current=SumUpCard.mount({id:"sumup-card",checkoutId:b.current,onResponse:e=>j(e),showAmount:!0,showSubmitButton:!1})},j=async(e,r)=>{if(console.log(e,r),"success"==e){let e={checkoutId:b.current,shippingDetails:g.current,contactDetails:f.current};console.log(e);try{let r=await fetch("https://p3p22yr8sg.execute-api.eu-west-2.amazonaws.com/default/handleOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok){let e=await r.json();console.log("Success:",e),t({}),location.href="/checkout/complete"}else throw await r.json()}catch(e){alert("Something went wrong with your payment. Please try again:)"),console.log("Payment failure",e)}}else"error"==e&&alert("Something went wrong with your payment. Please try again :)"),console.log(e),console.log(r)};return(0,s.jsxs)("div",{className:"flex flex-col pl-6 pr-6",children:[(0,s.jsx)(o(),{src:"https://gateway.sumup.com/gateway/ecom/card/v2/sdk.js",onLoad:()=>v()}),(0,s.jsx)("h1",{className:" text-2xl font-semibold pb-4",children:"Checkout"}),(0,s.jsxs)("div",{className:"bg-pubmain drop-shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg pb-2 font-semibold",children:"Order"}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(l.Z,{cart:e,shippingPrice:x})}),(0,s.jsx)(h,{form:[r,m,u]}),(0,s.jsx)("h2",{className:"text-lg pb-2 pt-4 font-semibold",children:"Payment"}),(0,s.jsx)("div",{id:"sumup-card",className:"pt-2 mb-4 bg-white border-2 border-black"}),(0,s.jsxs)("div",{onClick:a(e=>{console.log(e),g.current={fullName:e.fullName,address1:e.address1,address2:e.address2,postcode:e.postCode,price:x.current},f.current={email:e.email,phone:e.phoneNum},console.log("shipping",g.current),console.log("contact",f.current),p.current.submit()}),className:"bg-pubbrickblue hover:bg-stone-200 border-2 border-black text-center text-lg text-white pt-2 pb-2 pr-8 pl-8 drop-shadow-sm ",children:["Pay \xa3",y.current]})]})]})}},6176:function(e,t,r){"use strict";r.d(t,{A:function(){return a}});var s=r(2265);let a=(0,s.createContext)([])},7115:function(e,t,r){"use strict";r.r(t),r.d(t,{getInventory:function(){return s}});let s=async e=>{let t=await fetch("https://p3p22yr8sg.execute-api.eu-west-2.amazonaws.com/default/checkInventory?"+new URLSearchParams({productId:e}));if(t.ok){let r=await t.json();return console.log("inventory for ".concat(e,":"),r),r}}},4723:function(e,t,r){"use strict";var s=r(7437);t.Z={castle_bts:{id:4,status:"active",coverImage:"/castle_by_the_sea/CBTS_Grey_Front.jpg",route:"/publications/castle_by_the_sea",title:"Castle By the Sea",publicationYear:2024,detail:"Softcover",stockQuantity:30,info:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"A Castle by the Sea is a 22-page publication by Brad Gilbert that collates images taken in Ischia, Italy in the summer of 2022. It has been designed to be disassembled allowing you to use images as individual or large-scale prints."}),(0,s.jsx)("br",{})," ",(0,s.jsx)("p",{children:"“Although the memories might not depict the actual events 100% they still feel like the truth. The image can show something different but it shows the same truth as the memory and it’s nice to have a scene that only appears in your head. Which is what a moment in time really is. Every time I look back on these images it forms that mist of memories and I feel closer to rabbits near the sea.”"})]}),images_location:"/castle_by_the_sea",variants:[],price:15},orpheus_st:{id:1,status:"active",coverImage:"/orpheus_st_paintings/ND_3070_Cover.jpg",route:"/publications/orpheus_st_paintings",title:"Orpheus Street Paintings",publicationYear:2023,detail:"Hardcover",stockQuantity:150,info:"Orpheus Street Paintings is a 57 paged hardback book that collates the work of Nelson Diplexcito. The book introduces you to the artists studio setting and then showcases his body of work ranging from large scale oil on canvas to smaller oil on paper pieces. The book also contains an interview conducted by Jungwon Jay Hur about Diplexcitos practice.",images_location:"/orpheus_st_paintings",variants:[],price:30},below_bunyan:{id:2,status:"active",coverImage:"/below_bunyan/BelowBunyan_Grey_01.jpg",route:"/publications/below_bunyan",title:"Below Bunyan",publicationYear:2021,detail:"Hardcover",stockQuantity:30,info:"Below Bunyan is a book that represents the diverse artistic spirit of the next generation, captured through compelling details that reveal the interior world of an oft-overlooked phenomenon.",images_location:"/below_bunyan",variants:[],price:15},babe_rainbow:{id:3,status:"active",coverImage:"/babe_rainbow/MHC_Zine_Grey_01.jpg",route:"/publications/babe_rainbow",title:"Mildly High on the Babe Rainbow",publicationYear:2023,detail:"Hardcover",stockQuantity:15,info:"Mildly High on The Babe Rainbow combines London concert photography with selected lyrics to transport the reader into the audience at the venue. Each copy features a hand typewritten cover making every edition unique. The publication also comes with a black & white darkroom handprint from The Mild High Club at Moth Club.",images_location:"/babe_rainbow",variants:[],price:15}}}},function(e){e.O(0,[986,258,971,596,744],function(){return e(e.s=8830)}),_N_E=e.O()}]);