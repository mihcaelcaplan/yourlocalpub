(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{8830:function(e,t,s){Promise.resolve().then(s.bind(s,981))},1434:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(7437),n=s(6691),o=s.n(n),i=s(4723),a=s(2265),l=s(6176);function c(e){let{item_key:t,checkout:s}=e,[n,c]=(0,a.useContext)(l.A),[p,m]=(0,a.useState)(n[t].quantity);return(0,r.jsxs)("div",{className:"bg-gray-100 grid grid-cols-cartItem p-2 md:p-4 gap-2 justify-center text-center items-center",children:[(0,r.jsx)("a",{href:i.Z[t].route,className:"m-auto",children:(0,r.jsx)(o(),{className:"",src:i.Z[t].coverImage,alt:"$(item.title) cover image",width:100,height:100,sizes:"100vw",style:{width:"100%",height:"auto"}})}),(0,r.jsxs)("div",{className:"flex flex-col justify-center border-r-2",children:[(0,r.jsx)("p",{className:" text-sm text-stone-700 pb-2",children:"Title"}),(0,r.jsx)("p",{className:"pl-2 pr-2",children:i.Z[t].title})]}),0==p&&(0,r.jsx)(u,{setQuantity:m,cart:n,setCart:c,item_key:t}),p>0&&(0,r.jsxs)("div",{className:"flex flex-col justify-center border-r-2",children:[(0,r.jsx)("p",{className:" text-sm text-stone-700",children:"Quantity"}),s&&(0,r.jsx)("div",{children:n[t].quantity}),!s&&(0,r.jsx)(d,{item_key:t,quantity:p,setQuantity:m})]}),p>0&&(0,r.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,r.jsx)("p",{className:" text-sm text-stone-700 pb-2",children:"Price"}),(0,r.jsxs)("p",{children:["\xa3",i.Z[t].price]})]})]})}function d(e){let{item_key:t,quantity:s,setQuantity:n}=e,[o,i]=(0,a.useContext)(l.A);return(0,a.useEffect)(()=>{let e={...o};e[t].quantity=s,i(t=>({...e}))},[s]),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-center p-2 ",children:[(0,r.jsx)("div",{className:" bg-slate-200 hover:bg-pubblue rounded-md p-1 w-[1.5rem]",onClick:()=>{n(Number(s)-1)},children:"-"}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)("input",{className:"text-center w-6",onChange:e=>{isNaN(e.target.value)?n(s):n(Number(e.target.value))},value:s})}),(0,r.jsx)("div",{className:" bg-rose-200 hover:bg-pubred rounded-md p-1 w-[1.5rem]",onClick:()=>{n(Number(s)+1)},children:"+"})]})}function u(e){let{cart:t,setCart:s,setQuantity:n,item_key:o}=e;return(0,r.jsxs)("div",{className:"flex flex-col col-span-2 rounded-md bg-white w-full h-full",children:[(0,r.jsx)("div",{className:"flex flex-row bg-gray-200 rounded-t-md",children:(0,r.jsx)("div",{className:"text-[0.7rem] rounded-full bg-red-500 hover:bg-red-800 w-4 h-4 text-center ml-auto m-2",onClick:()=>{n(1)},children:"X"})}),(0,r.jsx)("div",{className:"flex flex-col rounded-md text-white justify-center text-center bg-pubblue hover:bg-pubred h-1/2 mt-auto mb-auto ml-2 mr-2",onClick:()=>{delete t[o],s(e=>({...t}))},children:(0,r.jsx)("p",{children:"Remove?"})})]})}},259:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(7437),n=s(1434);function o(e){let{price:t}=e;return(0,r.jsxs)("div",{className:"bg-gray-100 grid grid-cols-4 p-4 gap-2 justify-center text-center",children:[(0,r.jsx)("div",{className:"text-[3rem]",children:"\uD83D\uDCE6"}),(0,r.jsxs)("div",{className:"flex flex-col justify-center border-r-2 pl-2",children:[(0,r.jsx)("p",{className:" text-sm text-stone-700 pb-2",children:"Title"}),(0,r.jsx)("p",{children:"Shipping"})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-center border-r-2 pl-2",children:[(0,r.jsx)("p",{className:" text-sm text-stone-700 pb-2",children:"Quantity"}),(0,r.jsx)("div",{children:"1"})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-center pl-2",children:[(0,r.jsx)("p",{className:" text-sm text-stone-700 pb-2",children:"Price"}),(0,r.jsxs)("p",{children:["\xa3",t]})]})]})}function i(e){let{cart:t,shippingPrice:s}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[Object.keys(t).map(e=>(0,r.jsx)(n.Z,{item_key:e,checkout:!0},e)),(0,r.jsx)(o,{price:s.current})]})}s(6691)},981:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),n=s(8475),o=s.n(n),i=s(2265),a=s(1865),l=s(6176),c=s(259);function d(){let[e,t]=(0,i.useContext)(l.A),{register:s,handleSubmit:n,watch:d,formState:{errors:p}}=(0,a.cI)({mode:"onTouched"});d(p);var m=(0,i.useRef)(),h=(0,i.useRef)(),x=(0,i.useRef)(),b=(0,i.useRef)(),f=(0,i.useRef)(),g=(0,i.useRef)();(0,i.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("checkout"));h.current=e.checkoutId,f.current=e.shippingPrice,g.current=e.checkoutPrice},[]);let j=()=>{m.current=SumUpCard.mount({id:"sumup-card",checkoutId:h.current,onResponse:e=>v(e),showAmount:!0,showSubmitButton:!1})},v=async(e,t)=>{if("success"==e){let e={checkoutId:h.current,shippingDetails:x.current,contactDetails:b.current};console.log(e);try{let t=await fetch("https://p3p22yr8sg.execute-api.eu-west-2.amazonaws.com/default/handleOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let e=await t.json();console.log("Success:",e),location.href="/checkout/complete"}else throw error=await t.json()}catch(e){alert("Error:",e)}}else console.log(e),console.log(t)};return(0,r.jsxs)("div",{className:"flex flex-col p-4",children:[(0,r.jsx)(o(),{src:"https://gateway.sumup.com/gateway/ecom/card/v2/sdk.js",onLoad:()=>j()}),(0,r.jsx)("h1",{className:" text-xl pb-6",children:"Checkout"}),(0,r.jsxs)("div",{className:"bg-slate-200 p-2 rounded-md drop-shadow-md",children:[(0,r.jsx)("h2",{className:"text-lg pb-2 font-semibold",children:"Order"}),(0,r.jsx)(c.Z,{cart:e,shippingPrice:f}),(0,r.jsx)(u,{form:[s,p]}),(0,r.jsx)("h2",{className:"text-lg pb-2 pt-4 font-semibold",children:"Payment"}),(0,r.jsx)("div",{id:"sumup-card",className:"pt-2 pb-4"}),(0,r.jsxs)("div",{onClick:n(e=>{console.log(e),x.current={fullName:e.fullName,address1:e.address1,address2:e.address2,postcode:e.postCode,price:f.current},b.current={email:e.email,phone:e.phone},console.log("shipping",x.current),console.log("contact",b.current);let t=m.current.submit();console.log(t)}),className:"bg-stone-100 hover:bg-stone-200 border-2 border-sky-200 rounded-md text-center text-lg text-stone-600 pt-2 pb-2 pr-8 pl-8 drop-shadow-md ",children:["Pay \xa3",g.current]})]})]})}let u=e=>{let{form:t}=e,[s,n]=t;return console.log(n),(0,r.jsx)("div",{children:(0,r.jsxs)("form",{children:[(0,r.jsx)("h2",{className:"text-lg pb-2 pt-4 font-semibold",children:"Contact Info"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,r.jsx)("label",{children:"Email Address*"}),(0,r.jsx)("input",{...s("email",{required:"Email required"}),className:"md:col-span-2 rounded-md pl-2"+(n.email?" border-red-500 border-2":"")}),(0,r.jsx)("label",{children:"Phone Number*"}),(0,r.jsx)("input",{...s("phone",{required:!0}),className:"md:col-span-2 rounded-md pl-2"+(n.phone?" border-red-500 border-2":"")})]}),(0,r.jsx)("h2",{className:"text-lg pb-2 pt-4 font-semibold",children:"Shipping Address"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,r.jsx)("label",{children:"Name*"}),(0,r.jsx)("input",{...s("fullName",{required:!0}),className:"md:col-span-2 rounded-md pl-2"+(n.fullName?" border-red-500 border-2":"")}),(0,r.jsx)("label",{children:"Address Line 1*"}),(0,r.jsx)("input",{...s("address1",{required:!0}),className:"md:col-span-2 rounded-md pl-2"+(n.address1?" border-red-500 border-2":"")}),(0,r.jsx)("label",{children:"Address Line 2*"}),(0,r.jsx)("input",{...s("address2"),className:"md:col-span-2 rounded-md pl-2"+(n.address2?" border-red-500 border-2":"")}),(0,r.jsx)("label",{children:"Post Code*"}),(0,r.jsx)("input",{...s("postCode",{required:!0}),className:"md:col-span-2 rounded-md pl-2"+(n.postCode?" border-red-500 border-2":"")})]})]})})}},6176:function(e,t,s){"use strict";s.d(t,{A:function(){return n}});var r=s(2265);let n=(0,r.createContext)([])},4723:function(e,t){"use strict";t.Z={orpheus_st:{id:1,status:"active",coverImage:"/orpheus_st_paintings/1OrpheusStreet_Cover.jpg",route:"/publications/orpheus_st_paintings",title:"Orpheus Street Paintings",publicationYear:2023,detail:"Hardcover",stockQuantity:15,info:"Orpheus Street Paintings is a 57 paged hardback book that collates the work of Nelson Diplexcito. The book introduces you to the artists studio setting and then showcases his body of work ranging from large scale oil on canvas to smaller oil on paper pieces. The book also contains an interview conducted by Jungwon Jay Hur about Diplexcitos practice.",images_location:"/orpheus_st_paintings",variants:[],price:35},below_bunyan:{id:2,status:"active",coverImage:"/below_bunyan/1BelowBunyan_Grey_Cover.jpg",route:"/publications/below_bunyan",title:"Below Bunyan",publicationYear:2021,detail:"Hardcover",stockQuantity:30,info:"Below Bunyan is a book that represents the diverse artistic spirit of the next generation, captured through compelling details that reveal the interior world of an oft-overlooked phenomenon.",images_location:"/below_bunyan",variants:[],price:15},babe_rainbow:{id:3,status:"active",coverImage:"/babe_rainbow/1MHC_Zine_Grey_Cover.jpg",route:"/publications/babe_rainbow",title:"Mildly High on the Babe Rainbow",publicationYear:2023,detail:"Hardcover",stockQuantity:15,info:"Below Bunyan is a book that represents the diverse artistic spirit of the next generation, captured through compelling details that reveal the interior world of an oft-overlooked phenomenon.",images_location:"/babe_rainbow",variants:[],price:50}}}},function(e){e.O(0,[222,960,971,596,744],function(){return e(e.s=8830)}),_N_E=e.O()}]);