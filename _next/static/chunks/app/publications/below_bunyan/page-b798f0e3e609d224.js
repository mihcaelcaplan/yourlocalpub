(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{9950:function(e,t,r){Promise.resolve().then(r.bind(r,8724)),Promise.resolve().then(r.bind(r,1620)),Promise.resolve().then(r.bind(r,134))},5833:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var l=r(7437),n=r(2265),i=r(6176);function s(e){let{publication_key:t,isHidden:r,setHidden:n}=e;return(0,l.jsxs)("div",{className:r+" flex flex-col fixed top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 h-2/3 md:h-1/2 w-4/6 bg-slate-100 z-10 shadow-2xl rounded-lg",children:[(0,l.jsx)("div",{className:"bg-stone-200 p-1 rounded-t-lg",children:(0,l.jsx)("div",{className:"text-[0.7rem] leading-[0.9rem] rounded-full bg-red-500 hover:bg-red-800 w-4 h-4 text-center ml-auto",onClick:()=>{n("hidden")},children:"X"})}),(0,l.jsxs)("div",{className:"text-center m-auto pl-4 pr-4 text-xl md:text-[1.4rem] md:leading-8",children:["You're a right good pub-goer.",(0,l.jsx)("br",{}),"Well on ya, mate!",(0,l.jsx)("br",{})]}),(0,l.jsxs)("div",{className:"grid grid-rows-2 md:grid-cols-2 mt-auto items-center p-6 text-lg sm:text-xl  md:text-[1.25rem] text-center",children:[(0,l.jsx)("a",{className:" bg-pubyellow border-pubblue hover:bg-amber-200 border-2 rounded-full mb-4 md:mb-0 md:mr-4 mr-0",href:"/",children:"Continue Shopping"}),(0,l.jsx)("a",{className:" bg-pubblue border-pubyellow hover:bg-sky-200 border-2 rounded-full md:ml-4 ml-0",href:"/cart",children:"Go To Cart"})]})]})}function a(e){let{publication_key:t}=e,[r,a]=(0,n.useContext)(i.A),[o,d]=(0,n.useState)("hidden");return(0,l.jsxs)("div",{children:[(0,l.jsx)(s,{isHidden:o,setHidden:d,publication_key:t}),(0,l.jsx)("div",{href:"/cart",className:"h-6 w-auto p-4 bg-[#93c47d] text-stone-800 hover:bg-amber-50 border-[#f1c232] border-2 rounded-full text-center align-middle leading-[0rem] text-[0.75rem]  sm:text-[1rem]  md:text-[1.25rem] whitespace-nowrap ",onClick:()=>{!function(){let e={...r};e[t]?e[t].quantity+=1:e[t]={quantity:1},console.log(e),a(t=>({...e}))}(),d("visible")},children:"Add To Cart"})]})}},6176:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});var l=r(2265);let n=(0,l.createContext)([])},134:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var l=r(7437),n=r(6691),i=r.n(n),s=r(2265);function a(e){let{publication:t,image_paths:r}=e,[n,a]=(0,s.useState)(!1),[o,d]=(0,s.useState)(t.coverImage);r.filter(e=>e!=o);let c=e=>{if("bg"==e.target.id)a(!1);else if("forward"==e.target.id){let e=(r.indexOf(o)+1)%r.length;d(r[e])}else if("back"==e.target.id){let e=((r.indexOf(o)-1)%r.length+r.length)%r.length;d(r[e])}};return(0,l.jsxs)("div",{className:"pb-6 sm:pl-10 sm:pr-10 flex flex-col items-center",children:[(0,l.jsx)(i(),{className:n?"fixed z-20 top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2":"pb-4",priority:!0,src:o,alt:"$(publication.title) cover image",width:100,height:75,quality:90,sizes:"100vw",style:{width:"100%",height:"auto"},onClick:()=>{a(!0)}}),(0,l.jsx)("div",{className:"flex flex-row overflow-scroll md:h-[5rem] h-[3rem]",children:r.map(e=>(0,l.jsx)(i(),{className:e===o?"pr-2 opacity-100":"pr-2 opacity-50",onClick:()=>d(e),src:e,alt:"$(publication.title) cover image",width:100,height:100,quality:25,sizes:"100vw",style:{width:"auto",height:"100%"}},e))}),n&&(0,l.jsxs)("div",{id:"bg",className:"bg-black fixed top-0 left-0 h-screen w-screen z-10",onClick:e=>c(e),children:[(0,l.jsx)("div",{className:"mr-2 mt-2 right-10 text-[0.7rem] leading-[1rem] rounded-full bg-gray-200 opacity-70 hover:bg-red-800 w-4 h-4 text-center ml-auto",onClick:()=>{a(!1)},children:"X"}),(0,l.jsx)("div",{id:"back",className:"fixed z-30 left-0  opacity-60 h-full text-white text-[5rem] p-4",onClick:e=>c(e),children:(0,l.jsx)("div",{id:"back",className:" relative top-1/2 -translate-y-1/2",children:"<"})}),(0,l.jsx)("div",{id:"forward",className:"fixed z-30 right-0 opacity-60 h-full text-white text-[5rem] p-4 shadow-2xl shadow-rose-700",onClick:e=>c(e),children:(0,l.jsx)("div",{id:"forward",className:"relative top-1/2 -translate-y-1/2",children:">"})})]})]})}},1620:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var l=r(2265);let n=(0,l.createContext)([]),i=async e=>{let t=await fetch("https://p3p22yr8sg.execute-api.eu-west-2.amazonaws.com/default/checkInventory?"+new URLSearchParams({productId:e}));if(t.ok){let e=await t.json();return e}};function s(e){let{productId:t}=e,[r,s]=(0,l.useContext)(n);return null!=r[t]&&i(t).then(e=>{r[e.productId]=e.lockedInventory,s(r)}),null}},8724:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var l=r(7437),n=r(5833),i=r(2265);let s=async e=>{let t=await fetch("https://p3p22yr8sg.execute-api.eu-west-2.amazonaws.com/default/checkInventory?"+new URLSearchParams({productId:e}));if(t.ok){let e=await t.json();return console.log(e),e}};function a(e){let{publication:t,publication_key:r}=e,[a,o]=(0,i.useState)({soldOut:!1,itemsLeft:0});return(0,i.useEffect)(()=>{console.log("updating inv."),s(r).then(e=>{let r=!(e.lockedInventory<=t.stockQuantity),l=e.lockedInventory;o({soldOut:r,itemsLeft:l})})},[]),(0,l.jsxs)("div",{className:"grid grid-cols-1 m-2 sm:m-6 uppercase font-medium leading-5",children:[(0,l.jsx)("b",{children:t.title}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{className:"",children:"Published in "+t.publicationYear}),(0,l.jsx)("li",{className:"",children:t.detail})]}),(0,l.jsx)("p",{className:"mt-2 mb-4 w-inherit ",children:t.info}),(0,l.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col text-sm md:",children:[!a.soldOut&&(0,l.jsx)("div",{children:"(".concat(a.itemsLeft,"/").concat(t.stockQuantity,")")}),a.soldOut&&(0,l.jsx)("a",{className:" underline hover:text-pubblue",href:"mailto:support@yourlocalpublication.com?subject=Print more copies of ".concat(t.title,"&body=I want to buy one \uD83D\uDE00"),children:"Print more!"}),(0,l.jsx)("div",{className:"font-bold",children:"\xa3"+t.price})]}),a.soldOut&&(0,l.jsx)("div",{className:"h-6 w-auto p-4  text-stone-800 border-pubred border-2 rounded-full text-center align-middle md:text-[1.25] leading-[0rem] text-[.75rem] whitespace-nowrap",children:" Sold out!"}),!a.soldOut&&(0,l.jsx)(n.default,{publication_key:r})]})]})}},1295:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return d},unstable_getImgProps:function(){return o}});let l=r(1024),n=r(2301),i=r(7873),s=r(3222),a=l._(r(5033)),o=e=>{(0,i.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,n.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},d=s.Image},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=r(2265),n=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,r){var l,o={},d=null,c=null;for(l in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,l)&&!a.hasOwnProperty(l)&&(o[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===o[l]&&(o[l]=t[l]);return{$$typeof:n,type:e,key:d,ref:c,props:o,_owner:s.current}}t.jsx=o,t.jsxs=o},7437:function(e,t,r){"use strict";e.exports=r(622)},6691:function(e,t,r){e.exports=r(1295)}},function(e){e.O(0,[222,971,596,744],function(){return e(e.s=9950)}),_N_E=e.O()}]);